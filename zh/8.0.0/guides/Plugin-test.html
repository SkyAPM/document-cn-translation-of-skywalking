<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>插件自动测试框架</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/document-cn-translation-of-skywalking/assets/css/0.styles.ba3bd3a1.css" as="style"><link rel="preload" href="/document-cn-translation-of-skywalking/assets/js/app.db3552ea.js" as="script"><link rel="preload" href="/document-cn-translation-of-skywalking/assets/js/320.8d668559.js" as="script"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/10.bedbebc6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/100.b8e41343.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/101.f99fc2cf.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/102.181b36bf.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/103.105eab28.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/104.2eaa1ed3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/105.e781d5d4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/106.0076c45a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/107.367e560a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/108.4a06a95f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/109.045214d7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/11.5b9a995e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/110.80b472b2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/111.3fbb3034.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/112.69f5d310.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/113.5958754a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/114.8f063133.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/115.e89e33db.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/116.318edfdb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/117.018e3b48.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/118.782d25d7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/119.495717a5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/12.4ac6e3c4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/120.fe69b534.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/121.6c550590.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/122.7eb6cec9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/123.55711876.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/124.ac621e44.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/125.f59f5bd9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/126.014f9b4a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/127.1b69a9a6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/128.e9e4628a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/129.af702feb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/13.6233f32c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/130.67b3a7e0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/131.a434a50c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/132.ab71306d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/133.fb1f58fc.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/134.349869d1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/135.c4fe3b55.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/136.9f953c4c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/137.1bb89483.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/138.d6328061.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/139.d177d666.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/14.04fc2ede.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/140.77642702.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/141.15b49f4d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/142.e52b5c6d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/143.922c71e9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/144.0afc31c9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/145.7cf1189b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/146.719adeee.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/147.b0b2b525.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/148.02ec755b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/149.c086fd28.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/15.48914479.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/150.7b2760b5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/151.9f3c47f7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/152.7217de23.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/153.2f2ab188.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/154.08c45c2c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/155.8b97cdbb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/156.6bbaedb8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/157.c7cc82ba.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/158.d2af2715.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/159.e9a95c90.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/16.40ea27ee.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/160.0c15da39.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/161.a3e367a1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/162.e9770089.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/163.6c5628ec.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/164.be87cfd2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/165.376db211.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/166.327924ea.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/167.b100599b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/168.13bfbfd1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/169.a3d88c36.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/17.5095aee3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/170.e791f711.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/171.57ffdac5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/172.442b7f6a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/173.7c18fe93.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/174.f26dd3e7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/175.b0e33488.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/176.c3330e12.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/177.8badd935.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/178.1b99e9f8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/179.d36d3631.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/18.8f9a1c47.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/180.4f02b292.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/181.6b03f577.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/182.f5ec4610.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/183.625f02eb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/184.299149eb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/185.47402b92.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/186.a3ce7757.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/187.ab1d5fde.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/188.d4013182.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/189.58a4f3e5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/19.0cca8859.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/190.c9b76b97.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/191.536611e8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/192.cbee24fe.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/193.a5772ce8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/194.d32ef8c3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/195.e2056aec.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/196.9978aaa6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/197.24f1ef06.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/198.f75a9e13.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/199.396b0f31.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/2.1d1fc3e6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/20.9d49a6ee.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/200.e1214a71.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/201.c3ca40b8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/202.76b3fa50.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/203.ae458c2f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/204.7a28eaa7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/205.ebe1c965.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/206.71a05fb4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/207.28ecb91b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/208.dff05b34.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/209.877851e8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/21.d137738c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/210.b8216583.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/211.a8693733.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/212.dfddca85.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/213.cca642e2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/214.9f91bc9e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/215.7874f5ca.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/216.77f32167.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/217.85684ccd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/218.c6e816a2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/219.eda309a8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/22.9636ff01.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/220.0f403be7.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/221.2d4f0322.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/222.c36343dd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/223.fa77f4f1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/224.b51f2ccd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/225.08092814.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/226.d8595c75.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/227.65305d1e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/228.18db4290.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/229.a6c48230.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/23.7b1ab4cf.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/230.273dd119.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/231.ec8485e5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/232.a72823e1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/233.d092e71d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/234.61ce22aa.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/235.0ac9c09d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/236.ae262547.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/237.ea6453fb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/238.cd37484c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/239.d7ca93c4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/24.386978f3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/240.e846510c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/241.c09fa139.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/242.90e8f064.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/243.4ad68c61.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/244.c6914e08.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/245.5adf8223.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/246.fa2e504a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/247.acb0bb51.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/248.4f5a6ff5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/249.424d085a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/25.add80a04.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/250.de6a1582.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/251.c4069bce.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/252.5fd7f93a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/253.b3853714.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/254.c6dd73d2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/255.6842b42b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/256.36eff4ae.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/257.c6b8abb1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/258.494a980e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/259.599e3f5d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/26.9925efb1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/260.4cfc0bcb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/261.603230a3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/262.808a6205.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/263.0bfda32d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/264.031717aa.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/265.f5d57dbb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/266.9ddf071e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/267.2e2bb41f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/268.5dd40ab6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/269.44db8e79.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/27.9733f1de.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/270.af399452.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/271.f746af4d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/272.70bd591d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/273.efc7e774.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/274.2f8f6085.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/275.1a578133.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/276.b436c61a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/277.74add3e1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/278.5706de20.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/279.6264342c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/28.fcafd71b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/280.5ebeed8f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/281.2aac0f2e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/282.3bb550cd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/283.e97f0651.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/284.47bdb5c1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/285.d22a7b15.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/286.2340ecf1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/287.3de77606.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/288.0ed0b940.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/289.84ebb76a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/29.ecbec308.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/290.e8db10c5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/291.a1bfc768.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/292.a948274b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/293.5466e09f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/294.c27b9808.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/295.560d1821.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/296.9ec5b3dd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/297.ec172cd9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/298.00ddb02c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/299.6be46cc1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/3.8290e834.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/30.a180bf78.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/300.49a2d1e4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/301.d4ad0ea1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/302.d88f8d1c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/303.a53dc157.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/304.0b654946.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/305.b2ed31b3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/306.373128be.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/307.3d3a0a76.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/308.f339b014.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/309.85fb6fa9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/31.371604d6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/310.400d108a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/311.4ceae800.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/312.6ee231ad.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/313.7dea1c14.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/314.43d1f7ea.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/315.d9c548ef.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/316.f5058bf2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/317.4334ff89.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/318.2cb3a5f5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/319.20be50be.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/32.57a26495.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/321.e90ab430.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/322.fab9c466.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/323.e6885749.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/324.7448de1c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/325.bdb7da94.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/326.a3bd6379.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/327.72bf7819.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/328.071ce950.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/329.39e5d06c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/33.6cf6d6fe.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/330.e791b967.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/331.b2abf3e6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/332.2ad09701.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/333.851916d3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/334.350c3ba2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/335.4db57f67.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/336.f7da3140.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/337.a3c392a9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/338.2d677b2b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/339.3acd10e0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/34.74435e98.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/340.fda893f0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/341.7c109d58.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/342.7012e3fa.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/343.2af81d26.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/344.e4b18cfa.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/345.570dda4b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/346.e5f861ed.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/347.f8af988c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/348.bb0bfd13.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/349.e2099ec3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/35.4784fbf0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/350.2d6cb159.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/351.aa829f30.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/352.412a3daf.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/353.01fa092a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/354.b8855818.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/355.d61953ad.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/356.48699309.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/357.50646ab5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/358.c08d7934.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/359.0dc75bd1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/36.29629ea3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/360.52bce824.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/361.9ccb88fd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/362.eda2ac73.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/363.e7124976.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/364.51471fdf.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/365.77242f81.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/366.2a353f2f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/367.40525e91.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/368.9d31ffb3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/369.04a93377.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/37.c5773a7f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/370.394304a9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/371.affdfce6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/372.ad230249.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/373.f625216b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/374.a060952f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/375.95a77a5f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/376.afe9ee49.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/377.0e304c89.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/378.6813ff5b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/379.d414ba04.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/38.57bc7f02.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/380.f3abd089.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/381.e777c010.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/382.c9531d59.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/383.350a4754.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/384.907ba56e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/385.54dea81f.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/386.07b0caf6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/387.2b8258c8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/388.3207a473.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/39.4837aaf4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/4.4a2e62d9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/40.ec088c04.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/41.73be076a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/42.87925555.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/43.27992545.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/44.71fd7433.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/45.bf5f9f34.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/46.fb7378e3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/47.16c7a1db.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/48.bcbf2f6a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/49.dba65818.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/5.b3bc38db.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/50.0c75c8b3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/51.93a08188.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/52.f2d1e9c2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/53.3145c6f5.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/54.12aa31a3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/55.ea72af3d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/56.8b9e7132.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/57.ebc0c346.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/58.6fb76c52.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/59.626357d8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/6.58dba347.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/60.3bcf5aef.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/61.2a438dcd.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/62.a988c26e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/63.78086567.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/64.2b198481.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/65.48740a6a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/66.acbfe3f4.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/67.c19d2330.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/68.d5ffd944.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/69.ad8223bc.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/7.e16b2eef.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/70.b282a729.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/71.293525b6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/72.1c1e473a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/73.539d4c85.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/74.7ef4318b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/75.5c63bddb.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/76.03971da3.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/77.2d5c5ccf.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/78.9003bc0e.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/79.b32c00a8.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/8.46eaabd6.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/80.72add2c0.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/81.512803a1.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/82.35393b80.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/83.b01e4235.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/84.5607a252.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/85.9e727655.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/86.b385598c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/87.c6efb6a9.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/88.9ae4dd14.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/89.061f5d3c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/9.5dd78525.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/90.178ff976.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/91.a0801aac.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/92.f97fc6c2.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/93.efe7ae9b.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/94.94ea7e98.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/95.962ab28a.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/96.80f5856c.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/97.0a99768d.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/98.59cab337.js"><link rel="prefetch" href="/document-cn-translation-of-skywalking/assets/js/99.1edec306.js">
    <link rel="stylesheet" href="/document-cn-translation-of-skywalking/assets/css/0.styles.ba3bd3a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/document-cn-translation-of-skywalking/" class="home-link router-link-active"></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!---->  <!----> </div> <div class="page"> <div class="content"><h1 id="插件自动测试框架"><a href="#插件自动测试框架" class="header-anchor">#</a> 插件自动测试框架</h1> <p>插件测试框架旨在验证插件的功能和兼容状态。由于有数十个插件和数百个版本需要验证，因此无法手动进行。
测试框架使用基于容器的技术堆栈，需要一组安装了代理程序的真实服务，然后运行测试模拟OAP后端以检查从代理程序发送的分段数据。
主仓库中维护的每个插件都需要相应的测试用例，并且还与受支持的列表文档中的版本匹配。</p> <h2 id="环境要求"><a href="#环境要求" class="header-anchor">#</a> 环境要求</h2> <ol><li>MacOS/Linux</li> <li>jdk 8+</li> <li>Docker</li> <li>Docker Compose</li></ol> <h2 id="用例库镜像简介"><a href="#用例库镜像简介" class="header-anchor">#</a> 用例库镜像简介</h2> <p>该测试框架提供了 <code>JVM-container</code> 和 <code>Tomcat-container</code> 基础镜像。您可以为您的测试用例选择合适的一个，如果其中一个合适，建议选择<code>JVM-container</code> 。</p> <h3 id="jvm容器镜像简介"><a href="#jvm容器镜像简介" class="header-anchor">#</a> JVM容器镜像简介</h3> <p><a href="../../../test/plugin/containers/jvm-container">JVM-container</a> 使用 <code>openjdk:8</code> 作为基础镜像。
必须使用“ mvn clean package”将测试用例项目打包为“ project-name.zip”，包括“ startup.sh”和uber jar。</p> <p>以以下测试项目为例</p> <ul><li><a href="../../../test/plugin/scenarios/sofarpc-scenario">sofarpc-scenario</a>作为单个项目用例。</li> <li><a href="../../../test/plugin/scenarios/webflux-scenario">webflux-scenario</a> 作为包括多个项目的用例。</li></ul> <h3 id="tomcat容器镜像简介"><a href="#tomcat容器镜像简介" class="header-anchor">#</a> Tomcat容器镜像简介</h3> <p><a href="../../../test/plugin/containers/tomcat-container">Tomcat-container</a> 使用 <code>tomcat:8.5.42-jdk8-openjdk</code> 作为基础镜像。
必须使用 <code>mvn package</code> 将测试用例项目打包为 <code>project-name.war</code>。</p> <p>Take the following test project as a good example</p> <ul><li><a href="https://github.com/apache/skywalking/tree/master/test/plugin/scenarios/spring-4.3.x-scenario" target="_blank" rel="noopener noreferrer">spring-4.3.x-scenario<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="测试项目层次结构"><a href="#测试项目层次结构" class="header-anchor">#</a> 测试项目层次结构</h2> <p>该测试用例是一个独立的Maven项目，需要将其打包为war tar 文件或zip文件，具体取决于所选的基本镜像。此外，还需要两个外部可访问端点，主要是两个URL。</p> <p>所有的测试用例代码都应该在<code>org.apache.skywalking.apm.testcase</code>包中，除非期望使用某些代码，否则这些类可以在<code>test.org.apache.skywalking.apm.testcase</code>包中。</p> <p><strong>JVM容器测试项目层次结构</strong></p> <div class="language- extra-class"><pre class="language-text"><code>[plugin-scenario]
    |- [bin]
        |- startup.sh
    |- [config]
        |- expectedData.yaml
    |- [src]
        |- [main]
            |- ...
        |- [resource]
            |- log4j2.xml
    |- pom.xml
    |- configuration.yaml
    |- support-version.list

[] = directory
</code></pre></div><p><strong>Tomcat容器测试项目层次结构</strong></p> <div class="language- extra-class"><pre class="language-text"><code>[plugin-scenario]
    |- [config]
        |- expectedData.yaml
    |- [src]
        |- [main]
            |- ...
        |- [resource]
            |- log4j2.xml
        |- [webapp]
            |- [WEB-INF]
                |- web.xml
    |- pom.xml
    |- configuration.yaml
    |- support-version.list

[] = directory
</code></pre></div><h2 id="测试用例配置文件"><a href="#测试用例配置文件" class="header-anchor">#</a> 测试用例配置文件</h2> <p>每个测试用例都需要以下文件。</p> <table><thead><tr><th>文件名</th> <th>内容描述</th></tr></thead> <tbody><tr><td><code>configuration.yml</code></td> <td>声明基本的测试用例介绍, 包括, 用例名称, 入口端点，模式，依赖项。</td></tr> <tr><td><code>expectedData.yaml</code></td> <td>描述预期的追踪段数据。</td></tr> <tr><td><code>support-version.list</code></td> <td>列出此用例的目标版本。</td></tr> <tr><td><code>startup.sh</code></td> <td>仅仅在<code>JVM-container</code> 中需要, 当使用<code>Tomcat-container</code>时不需要。</td></tr></tbody></table> <p><code>*</code> <code>support-version.list</code> 格式要求每一行是个单独版本。可以使用<code>＃</code>来注释该版本。</p> <h3 id="configuration-yml"><a href="#configuration-yml" class="header-anchor">#</a> configuration.yml</h3> <table><thead><tr><th>参数</th> <th>描述</th></tr></thead> <tbody><tr><td>type</td> <td>镜像类型, 可选 <code>jvm</code> 或者 <code>tomcat</code>。必填。</td></tr> <tr><td>entryService</td> <td>用于测试用例访问的入口端点(URL)。必填。 (HTTP Method: GET)</td></tr> <tr><td>healthCheck</td> <td>用于测试用例健康检查的端点(URL)。必填。 (HTTP Method: HEAD)</td></tr> <tr><td>startScript</td> <td>启动脚本的路径。仅在镜像类型为jvm(<code>type: jvm</code>)时必填。</td></tr> <tr><td>framework</td> <td>用例名称.</td></tr> <tr><td>runningMode</td> <td>运行模式是否带有可选插件,可选, 默认<code>default</code>, <code>with_optional</code>, <code>with_bootstrap</code></td></tr> <tr><td>withPlugins</td> <td>插件选择规则。例:<code>apm-spring-annotation-plugin-*.jar</code>。当 <code>runningMode=with_optional</code> 或 <code>runningMode=with_bootstrap</code>必填。</td></tr> <tr><td>environment</td> <td>例如<code>docker-compose#environment</code>.</td></tr> <tr><td>depends_on</td> <td>例如<code>docker-compose#depends_on</code>.</td></tr> <tr><td>dependencies</td> <td>例如<code>docker-compose#services</code>, 支持<code>image、links、hostname、environment、depends_on</code>。</td></tr></tbody></table> <p><strong>注意：仅当<code>dependencies</code>为空时，<code>docker-compose</code>才有效。</strong></p> <p><strong>runningMode</strong>选项说明。</p> <table><thead><tr><th>选项</th> <th>描述</th></tr></thead> <tbody><tr><td>default</td> <td>激活<code>plugin</code>文件夹中的所有插件，例如官方发行的插件。</td></tr> <tr><td>with_optional</td> <td>激活<code>default</code>模式和<code>optional-plugin</code>文件夹里面的通过指定选择器指定的插件。</td></tr> <tr><td>with_bootstrap</td> <td>激活<code>default</code>模式和<code>bootstrap-plugin</code>文件夹里面的通过指定选择器指定的插件。</td></tr></tbody></table> <p>with_optional/with_bootstrap 支持多个选择器,以<code>;</code>分割.</p> <p><strong>文件格式</strong></p> <div class="language- extra-class"><pre class="language-text"><code>type:
entryService:
healthCheck:
startScript:
framework:
runningMode:
withPlugins:
environment:
  ...
depends_on:
  ...
dependencies:
  service1:
    image:
    hostname:
    expose:
      ...
    environment:
      ...
    depends_on:
      ...
    links:
      ...
    entrypoint:
      ...
    healthcheck:
      ...
</code></pre></div><ul><li>依赖项支持docker撰写<code>healthcheck</code>。但是格式略有不同。我们需要将-作为每个配置项的开头，并将其描述为字符串行。</li></ul> <p>例如在官方文档中，健康检查是</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
  <span class="token key atrule">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;CMD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;curl&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-f&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost&quot;</span><span class="token punctuation">]</span>
  <span class="token key atrule">interval</span><span class="token punctuation">:</span> 1m30s
  <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 10s
  <span class="token key atrule">retries</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">start_period</span><span class="token punctuation">:</span> 40s
</code></pre></div><p>在这里，应该写成</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">healthcheck</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">'test: [&quot;CMD&quot;, &quot;curl&quot;, &quot;-f&quot;, &quot;http://localhost&quot;]'</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;interval: 1m30s&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;timeout: 10s&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;retries: 3&quot;</span>
  <span class="token punctuation">-</span> <span class="token string">&quot;start_period: 40s&quot;</span>
</code></pre></div><p>在某些情况下，需要依赖服务（主要是第三方服务器，例如SolrJ服务器）来保持与客户端库版本相同的版本，该库在pom中定义为<code>$ {test.framework.version}</code>。
可以将<code>${CASE_SERVER_IMAGE_VERSION}</code>用作版本号，它将在测试中针对每个版本进行更改。</p> <blockquote><p>不支持与资源相关的配置，例如卷，端口和ulimit。因为在测试场景中
不需要将任何端口映射到主机VM，也无需安装任何文件夹。</p></blockquote> <p><strong>以以下测试用例可以作为参考</strong></p> <ul><li><a href="../../../test/plugin/scenarios/dubbo-2.7.x-scenario/configuration.yml">dubbo-2.7.x with JVM-container</a></li> <li><a href="../../../test/plugin/scenarios/jetty-scenario/configuration.yml">jetty with JVM-container</a></li> <li><a href="../../../test/plugin/scenarios/gateway-2.1.x-scenario/configuration.yml">gateway with runningMode</a></li> <li><a href="../../../test/plugin/scenarios/canal-scenario/configuration.yml">canal with docker-compose</a></li></ul> <h3 id="expecteddata-yaml"><a href="#expecteddata-yaml" class="header-anchor">#</a> expectedData.yaml</h3> <p><strong>数字运算符</strong></p> <table><thead><tr><th style="text-align:left">运算符</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left"><code>nq</code></td> <td style="text-align:left">!=</td></tr> <tr><td style="text-align:left"><code>eq</code></td> <td style="text-align:left">==(默认情况下)</td></tr> <tr><td style="text-align:left"><code>ge</code></td> <td style="text-align:left">&gt;=</td></tr> <tr><td style="text-align:left"><code>gt</code></td> <td style="text-align:left">&gt;</td></tr></tbody></table> <p><strong>字符串运算符</strong></p> <table><thead><tr><th style="text-align:left">运算符</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left"><code>not null</code></td> <td style="text-align:left">不为空</td></tr> <tr><td style="text-align:left"><code>null</code></td> <td style="text-align:left">空或者空字符串</td></tr> <tr><td style="text-align:left"><code>eq</code></td> <td style="text-align:left">等于(默认情况下)</td></tr></tbody></table> <p><strong>细分目标描述格式</strong></p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">segmentItems</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span>
  <span class="token key atrule">serviceName</span><span class="token punctuation">:</span> SERVICE_NAME(string)
  <span class="token key atrule">segmentSize</span><span class="token punctuation">:</span> SEGMENT_SIZE(int)
  <span class="token key atrule">segments</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">segmentId</span><span class="token punctuation">:</span> SEGMENT_ID(string)
    <span class="token key atrule">spans</span><span class="token punctuation">:</span>
        <span class="token punctuation">...</span>
</code></pre></div><table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>serviceName</td> <td>服务名称。</td></tr> <tr><td>segmentSize</td> <td>预期的目标数量。</td></tr> <tr><td>segmentId</td> <td>链路ID。</td></tr> <tr><td>spans</td> <td>追踪段跨度列表。遵循下一部分，以了解如何描述每个跨度。</td></tr></tbody></table> <p><strong>跨度验证描述格式</strong></p> <p><strong>注意</strong>：跨度列表的顺序应遵循跨度完成时间的顺序。</p> <div class="language-yml extra-class"><pre class="language-yml"><code>    <span class="token key atrule">operationName</span><span class="token punctuation">:</span> OPERATION_NAME(string)
    <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> PARENT_SPAN_ID(int)
    <span class="token key atrule">spanId</span><span class="token punctuation">:</span> SPAN_ID(int)
    <span class="token key atrule">startTime</span><span class="token punctuation">:</span> START_TIME(int)
    <span class="token key atrule">endTime</span><span class="token punctuation">:</span> END_TIME(int)
    <span class="token key atrule">isError</span><span class="token punctuation">:</span> <span class="token key atrule">IS_ERROR(string</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token punctuation">,</span> false)
    <span class="token key atrule">spanLayer</span><span class="token punctuation">:</span> <span class="token key atrule">SPAN_LAYER(string</span><span class="token punctuation">:</span> DB<span class="token punctuation">,</span> RPC_FRAMEWORK<span class="token punctuation">,</span> HTTP<span class="token punctuation">,</span> MQ<span class="token punctuation">,</span> CACHE)
    <span class="token key atrule">spanType</span><span class="token punctuation">:</span> <span class="token key atrule">SPAN_TYPE(string</span><span class="token punctuation">:</span> Exit<span class="token punctuation">,</span> Entry<span class="token punctuation">,</span> Local)
    <span class="token key atrule">componentId</span><span class="token punctuation">:</span> COMPONENT_ID(int)
    <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> TAG_KEY(string)<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> TAG_VALUE(string)<span class="token punctuation">}</span>
    <span class="token punctuation">...</span>
    <span class="token key atrule">logs</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> LOG_KEY(string)<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> LOG_VALUE(string)<span class="token punctuation">}</span>
    <span class="token punctuation">...</span>
    <span class="token key atrule">peer</span><span class="token punctuation">:</span> PEER(string)
    <span class="token key atrule">refs</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span>
       <span class="token key atrule">traceId</span><span class="token punctuation">:</span> TRACE_ID(string)<span class="token punctuation">,</span>
       <span class="token key atrule">parentTraceSegmentId</span><span class="token punctuation">:</span> PARENT_TRACE_SEGMENT_ID(string)<span class="token punctuation">,</span>
       <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> PARENT_SPAN_ID(int)<span class="token punctuation">,</span>
       <span class="token key atrule">parentService</span><span class="token punctuation">:</span> PARENT_SERVICE(string)<span class="token punctuation">,</span>
       <span class="token key atrule">parentServiceInstance</span><span class="token punctuation">:</span> PARENT_SERVICE_INSTANCE(string)<span class="token punctuation">,</span>
       <span class="token key atrule">parentEndpoint</span><span class="token punctuation">:</span> PARENT_ENDPOINT_NAME(string)<span class="token punctuation">,</span>
       <span class="token key atrule">networkAddress</span><span class="token punctuation">:</span> NETWORK_ADDRESS(string)<span class="token punctuation">,</span>
       <span class="token key atrule">refType</span><span class="token punctuation">:</span>  <span class="token key atrule">REF_TYPE(string</span><span class="token punctuation">:</span> CrossProcess<span class="token punctuation">,</span> CrossThread)
     <span class="token punctuation">}</span>
   <span class="token punctuation">...</span>
</code></pre></div><table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>operationName</td> <td>跨度操作名称。</td></tr> <tr><td>parentSpanId</td> <td>父跨度ID。 <strong>注意</strong>: 第一个跨度的父跨度ID应该为-1。</td></tr> <tr><td>spanId</td> <td>跨度ID. <strong>注意</strong>, 从0开始。</td></tr> <tr><td>startTime</td> <td>跨度开始时间。 无法获得准确的时间，非0。</td></tr> <tr><td>endTime</td> <td>跨度结束时间。无法获得准确的时间，非0。</td></tr> <tr><td>isError</td> <td>跨度状态, true 或者 false.</td></tr> <tr><td>componentId</td> <td>插件的组件ID。</td></tr> <tr><td>tags</td> <td>跨度的标签列表。 <strong>注意</strong>,保持与插件编码相同的顺序。</td></tr> <tr><td>logs</td> <td>跨度的日志列表。 <strong>注意</strong>,保持与插件编码相同的顺序。</td></tr> <tr><td>SpanLayer</td> <td>可选项, DB, RPC_FRAMEWORK, HTTP, MQ, CACHE.</td></tr> <tr><td>SpanType</td> <td>跨度类型, 可选项, Exit、Entry 或 Local.</td></tr> <tr><td>peer</td> <td>远端网络地址, 大部分情况下是IP +端口。对于Exit跨度，这是必需的。</td></tr></tbody></table> <p>SegmentRef的验证描述</p> <table><thead><tr><th>属性</th> <th>描述</th></tr></thead> <tbody><tr><td>traceId</td> <td>链路ID</td></tr> <tr><td>parentTraceSegmentId</td> <td>父追踪段ID，指向父追踪段中的追踪段ID。</td></tr> <tr><td>parentSpanId</td> <td>父跨度ID, 指向父追踪段中跨度的跨度ID。</td></tr> <tr><td>parentService</td> <td>父/下游服务的名称。</td></tr> <tr><td>parentServiceInstance</td> <td>父/下游服务实例的名称。</td></tr> <tr><td>parentEndpoint</td> <td>父/下游服务的端点。</td></tr> <tr><td>networkAddress</td> <td>父出口跨度的远端网络地址。</td></tr> <tr><td>refType</td> <td>引用类型, 可选项, 跨进程 或 跨线程.</td></tr></tbody></table> <h3 id="startup-sh"><a href="#startup-sh" class="header-anchor">#</a> startup.sh</h3> <p>该脚本提供了基于JVM的服务的起点，其中大多数以带有一些变量的<code>java -jar</code>开始。 Shell中提供了以下系统环境变量。</p> <table><thead><tr><th style="text-align:left">变量</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">agent_opts</td> <td style="text-align:left">选择代理插件，请检查插件文档中的详细信息或此PR中添加的相同选项。</td></tr> <tr><td style="text-align:left">SCENARIO_NAME</td> <td style="text-align:left">服务名称。默认与用例文件夹名称相同</td></tr> <tr><td style="text-align:left">SCENARIO_VERSION</td> <td style="text-align:left">版本</td></tr> <tr><td style="text-align:left">SCENARIO_ENTRY_SERVICE</td> <td style="text-align:left">进入此服务的入口URL</td></tr> <tr><td style="text-align:left">SCENARIO_HEALTH_CHECK_URL</td> <td style="text-align:left">健康检查的URL</td></tr></tbody></table> <blockquote><p><code>${agent_opts}</code> 必须添加到你的 <code>java -jar</code> 命令行, 其中包括测试框架注入的参数, 和
保证探针能被加载。 所有其他参数应在之后 <code>${agent_opts}</code>添加.</p></blockquote> <p>测试框架默认情况下会将服务名称设置为测试用例文件夹名称，但是在某些情况下，需要多个测试项目才能以不同的服务代码运行，可以像以下示例一样显式设置它。</p> <p>示例</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token assign-left variable">home</span><span class="token operator">=</span><span class="token string">&quot;$(cd &quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> $0<span class="token variable">)</span></span>&quot;</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token punctuation">)</span><span class="token string">&quot;

java -jar <span class="token variable">${agent_opts}</span> &quot;</span>-Dskywalking.agent.service_name<span class="token operator">=</span>jettyserver-scenario<span class="token string">&quot; <span class="token variable">${home}</span>/../libs/jettyserver-scenario.jar &amp;
sleep 1

java -jar <span class="token variable">${agent_opts}</span> &quot;</span>-Dskywalking.agent.service_name<span class="token operator">=</span>jettyclient-scenario&quot;  <span class="token variable">${home}</span>/<span class="token punctuation">..</span>/libs/jettyclient-scenario.jar <span class="token operator">&amp;</span>

</code></pre></div><blockquote><p>仅在确实需要时设置此选项或使用其他SkyWalking选项。</p></blockquote> <p><strong>以以下测试用例为例</strong></p> <ul><li><a href="../../../test/plugin/scenarios/undertow-scenario/bin/startup.sh">undertow</a></li> <li><a href="../../../test/plugin/scenarios/webflux-scenario/webflux-dist/bin/startup.sh">webflux</a></li></ul> <h2 id="最佳实践"><a href="#最佳实践" class="header-anchor">#</a> 最佳实践</h2> <h3 id="如何使用原型创建测试用例项目"><a href="#如何使用原型创建测试用例项目" class="header-anchor">#</a> 如何使用原型创建测试用例项目</h3> <p>我们提供了原型和脚本，使创建项目更加容易。它创建了一个完整的测试用例项目。
这样我们只需要关注用例。首先，我们可以关注以下命令来获取有关脚本的用法。</p> <p><code>bash ${SKYWALKING_HOME}/test/plugin/generator.sh</code></p> <p>然后运行并在<code>./scenarios</code>中生成一个以<code>scenario_name</code>的项目。</p> <h3 id="推荐pom"><a href="#推荐pom" class="header-anchor">#</a> 推荐Pom</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 在pom中提供和使用此属性. --&gt;</span>
        <span class="token comment">&lt;!-- 此版本应与库版本匹配, --&gt;</span>
        <span class="token comment">&lt;!-- 在这种情况下，http组件库版本为4.3. --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test.framework.version</span><span class="token punctuation">&gt;</span></span>4.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test.framework.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.httpcomponents<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>httpclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${test.framework.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 将程序包的最终名称设置为与测试用例文件夹的大小写相同. --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>finalName</span><span class="token punctuation">&gt;</span></span>httpclient-4.3.x-scenario<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>finalName</span><span class="token punctuation">&gt;</span></span>
        ....
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="如何实现心跳服务"><a href="#如何实现心跳服务" class="header-anchor">#</a> 如何实现心跳服务</h3> <p>心跳服务旨在检查服务可用状态。该服务是一个简单的HTTP服务，返回200表示目标服务已准备就绪。
然后，流量生成器将访问进入服务并验证预期数据。用户应考虑使用此服务来检测诸如相关服务是否已准备就绪，尤其是在相关服务是数据库或集群时。</p> <p>请注意，由于可以完整或部分跟踪心跳服务，因此, <code>expectedData.yaml</code>中的<code>segmentSize</code>(追踪段数量)应当使用 <code>ge</code>作为操作符,
并且不要在预期的追踪段数据中包含心跳服务的追踪段。</p> <h3 id="编写预期数据的示例过程"><a href="#编写预期数据的示例过程" class="header-anchor">#</a> 编写预期数据的示例过程</h3> <p>预期数据文件, <code>expectedData.yaml</code>, 包含 <code>SegmentItems</code>.</p> <p>我们正在使用HttpClient插件来展示如何写入期望的数据.</p> <p>测试有两个要点</p> <ol><li>是否创建HttpClient span。</li> <li>ContextCarrier是否正确创建，并在进程之间传播。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>+-------------+         +------------------+            +-------------------------+
|   Browser   |         |  Case Servlet    |            | ContextPropagateServlet |
|             |         |                  |            |                         |
+-----|-------+         +---------|--------+            +------------|------------+
      |                           |                                  |
      |                           |                                  |
      |       WebHttp            +-+                                 |
      +------------------------&gt; |-|         HttpClient             +-+
      |                          |--------------------------------&gt; |-|
      |                          |-|                                |-|
      |                          |-|                                |-|
      |                          |-| &lt;--------------------------------|
      |                          |-|                                +-+
      | &lt;--------------------------|                                 |
      |                          +-+                                 |
      |                           |                                  |
      |                           |                                  |
      |                           |                                  |
      |                           |                                  |
      +                           +                                  +
</code></pre></div><h4 id="segmentitems"><a href="#segmentitems" class="header-anchor">#</a> segmentItems</h4> <p>通过遵循HttpClient用例的流程，应该创建两个追踪段。</p> <ol><li>一段代表 用例Servlet 访问。我们将其命名为<code>SegmentA</code>。</li> <li>一段代表ContextPropagateServlet访问。我们将其命名为<code>SegmentB</code>。</li></ol> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token key atrule">segmentItems</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">serviceName</span><span class="token punctuation">:</span> httpclient<span class="token punctuation">-</span>case
    <span class="token key atrule">segmentSize</span><span class="token punctuation">:</span> ge 2 <span class="token comment"># Could have more than one health check segments, because, the dependency is not standby.</span>
</code></pre></div><p>由于Tomcat插件是SkyWalking的默认插件，因此在SegmentA中有两个跨度</p> <ol><li>Tomcat 入口跨度(entry span)</li> <li>HttpClient 出口跨度(exit span)</li></ol> <p>SegmentA跨度列表应如下</p> <div class="language-yml extra-class"><pre class="language-yml"><code>    <span class="token punctuation">-</span> <span class="token key atrule">segmentId</span><span class="token punctuation">:</span> not null
      <span class="token key atrule">spans</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">operationName</span><span class="token punctuation">:</span> /httpclient<span class="token punctuation">-</span>case/case/context<span class="token punctuation">-</span>propagate
          <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> <span class="token number">0</span>
          <span class="token key atrule">spanId</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">startTime</span><span class="token punctuation">:</span> nq 0
          <span class="token key atrule">endTime</span><span class="token punctuation">:</span> nq 0
          <span class="token key atrule">isError</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">spanLayer</span><span class="token punctuation">:</span> Http
          <span class="token key atrule">spanType</span><span class="token punctuation">:</span> Exit
          <span class="token key atrule">componentId</span><span class="token punctuation">:</span> eq 2
          <span class="token key atrule">tags</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> url<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'http://127.0.0.1:8080/httpclient-case/case/context-propagate'</span><span class="token punctuation">}</span>
            <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> http.method<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> GET<span class="token punctuation">}</span>
          <span class="token key atrule">logs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token key atrule">peer</span><span class="token punctuation">:</span> 127.0.0.1<span class="token punctuation">:</span><span class="token number">8080</span>
        <span class="token punctuation">-</span> <span class="token key atrule">operationName</span><span class="token punctuation">:</span> /httpclient<span class="token punctuation">-</span>case/case/httpclient
          <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> <span class="token number">-1</span>
          <span class="token key atrule">spanId</span><span class="token punctuation">:</span> <span class="token number">0</span>
          <span class="token key atrule">startTime</span><span class="token punctuation">:</span> nq 0
          <span class="token key atrule">endTime</span><span class="token punctuation">:</span> nq 0
          <span class="token key atrule">spanLayer</span><span class="token punctuation">:</span> Http
          <span class="token key atrule">isError</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
          <span class="token key atrule">spanType</span><span class="token punctuation">:</span> Entry
          <span class="token key atrule">componentId</span><span class="token punctuation">:</span> <span class="token number">1</span>
          <span class="token key atrule">tags</span><span class="token punctuation">:</span>
            <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> url<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:{SERVER_OUTPUT_PORT}/httpclient-case/case/httpclient'</span><span class="token punctuation">}</span>
            <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> http.method<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> GET<span class="token punctuation">}</span>
          <span class="token key atrule">logs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token key atrule">peer</span><span class="token punctuation">:</span> <span class="token null important">null</span>
</code></pre></div><p>SegmentB应该只有一个Tomcat跨度，但应包含指向SegmentA的Ref。</p> <p>SegmentB跨度列表应如下</p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token punctuation">-</span> <span class="token key atrule">segmentId</span><span class="token punctuation">:</span> not null
  <span class="token key atrule">spans</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span>
   <span class="token key atrule">operationName</span><span class="token punctuation">:</span> /httpclient<span class="token punctuation">-</span>case/case/context<span class="token punctuation">-</span>propagate
   <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> <span class="token number">-1</span>
   <span class="token key atrule">spanId</span><span class="token punctuation">:</span> <span class="token number">0</span>
   <span class="token key atrule">tags</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> url<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> <span class="token string">'http://127.0.0.1:8080/httpclient-case/case/context-propagate'</span><span class="token punctuation">}</span>
   <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">key</span><span class="token punctuation">:</span> http.method<span class="token punctuation">,</span> <span class="token key atrule">value</span><span class="token punctuation">:</span> GET<span class="token punctuation">}</span>
   <span class="token key atrule">logs</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
   <span class="token key atrule">startTime</span><span class="token punctuation">:</span> nq 0
   <span class="token key atrule">endTime</span><span class="token punctuation">:</span> nq 0
   <span class="token key atrule">spanLayer</span><span class="token punctuation">:</span> Http
   <span class="token key atrule">isError</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
   <span class="token key atrule">spanType</span><span class="token punctuation">:</span> Entry
   <span class="token key atrule">componentId</span><span class="token punctuation">:</span> <span class="token number">1</span>
   <span class="token key atrule">peer</span><span class="token punctuation">:</span> <span class="token null important">null</span>
   <span class="token key atrule">refs</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">parentEndpoint</span><span class="token punctuation">:</span> /httpclient<span class="token punctuation">-</span>case/case/httpclient<span class="token punctuation">,</span> <span class="token key atrule">networkAddress</span><span class="token punctuation">:</span> <span class="token string">'localhost:8080'</span><span class="token punctuation">,</span> <span class="token key atrule">refType</span><span class="token punctuation">:</span> CrossProcess<span class="token punctuation">,</span> <span class="token key atrule">parentSpanId</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token key atrule">parentTraceSegmentId</span><span class="token punctuation">:</span> not null<span class="token punctuation">,</span> <span class="token key atrule">parentServiceInstance</span><span class="token punctuation">:</span> not null<span class="token punctuation">,</span> <span class="token key atrule">parentService</span><span class="token punctuation">:</span> not null<span class="token punctuation">,</span> <span class="token key atrule">traceId</span><span class="token punctuation">:</span> not null<span class="token punctuation">}</span>
</code></pre></div><h2 id="本地测试和提交"><a href="#本地测试和提交" class="header-anchor">#</a> 本地测试和提交</h2> <p>首先，测试用例项目可以成功编译，具有正确的项目结构并且可以部署。
开发人员应该测试启动脚本是否可以在Linux / MacOS中运行，并且 入口服务/健康检查服务 能够提供响应。</p> <p>您可以使用以下命令运行测试</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> <span class="token variable">${SKYWALKING_HOME}</span>
<span class="token function">bash</span> ./test/plugin/run.sh -f <span class="token variable">${scenario_name}</span>
</code></pre></div><p><strong>注意</strong>，如果 <code>./apm-sniffer</code> 中的代码被改变, 不管是因为您的更改还是git更新，
请重新编译 <code>skywalking-agent</code>模块。因为测试框架将使用现有的 <code>skywalking-agent</code> 文件夹,
而不是每次都重新编译它。</p> <p>使用 <code>${SKYWALKING_HOME}/test/plugin/run.sh -h</code> 了解更多命令选项。</p> <p>如果本地测试通过，则可以将其添加到 <code>.github/workflows/plugins-test.&lt;n&gt;.yaml</code> 文件, 它将驱动在官方SkyWalking存储库的Github Actions上运行的测试。
根据您的插件名称, 请按字母顺序将测试用例添加到<code>.github/workflows/plugins-test.&lt;n&gt;.yaml</code> 文件中。</p> <p>每个测试用例都是一个Github Actions作业(job)。请使用 <code>&lt;scenario name&gt; + &lt;version range&gt; + (&lt;supported version count&gt;)</code>作为作业(job)的 <code>title</code>, 并且方案目录作为作业的<code>name</code>,
通常，您只需要确定要在文件（<code>plugins-test。&lt;n&gt; .yaml</code>）中添加测试用例，并简单地在其中添加一行（如下所示），以现有用例为示例。</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">PluginsTest</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> Plugin
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span><span class="token number">18.04</span>
    <span class="token key atrule">timeout-minutes</span><span class="token punctuation">:</span> <span class="token number">90</span>
    <span class="token key atrule">strategy</span><span class="token punctuation">:</span>
      <span class="token key atrule">fail-fast</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">matrix</span><span class="token punctuation">:</span>
        <span class="token key atrule">case</span><span class="token punctuation">:</span>
          <span class="token comment"># ...</span>
          <span class="token punctuation">-</span> <span class="token punctuation">{</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'&lt;your case name&gt;'</span><span class="token punctuation">,</span> <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'&lt;PluginName, i.e. Spring&gt; (&lt;Supported Version Count, i.e 12&gt;)'</span> <span class="token punctuation">}</span> <span class="token comment"># &lt;&lt;== 按字母顺序插入一行</span>
          <span class="token comment"># ...</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/document-cn-translation-of-skywalking/assets/js/app.db3552ea.js" defer></script><script src="/document-cn-translation-of-skywalking/assets/js/320.8d668559.js" defer></script>
  </body>
</html>
