(window.webpackJsonp=window.webpackJsonp||[]).push([[348],{217:function(t,a,e){"use strict";e.r(a);var s=e(0),n=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),e("p",[t._v("默认的启动脚本是"),e("code",[t._v("/bin/oapService.sh")]),t._v("(.bat)。\n阅读"),e("router-link",{attrs:{to:"./backend-start-up-mode.html"}},[t._v("start up mode")]),t._v(" 可了解启动backend的其它选项。")],1),t._v(" "),t._m(3),t._v(" "),e("p",[t._v("这个设置文件背后的核心概念是，Skywalking的Collector基于纯模块化设计。\n最终用户可以根据自己的需求切换或组装收集器功能。")]),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),e("p",[t._v("例如:")]),t._v(" "),t._m(6),t._m(7),t._v(" "),e("p",[t._v("同时，模块包括必修模块和可选模块，必修模块提供后端框架，\n即使模块化支持可插拔，删除这些模块是没有意义的，对于可选模块，其中一些有\n一个名为“none”的提供程序实现，这意味着它只提供一个没有实际逻辑的shell，典型的例子是telemetry。\n将“-”设置为“selector”意味着在运行时将排除整个模块。\n我们强烈建议您不要尝试更改这些模块的api，除非你非常了解SkyWalking项目及其代码。")]),t._v(" "),e("p",[t._v("必须的模块列表")]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),e("p",[t._v("在理解了设置文件结构之后，您可以选择您感兴趣的功能文档。\n我们建议您按照以下顺序阅读功能文档。")]),t._v(" "),e("ol",[e("li",[e("router-link",{attrs:{to:"./backend-setting-override.html"}},[t._v("Overriding settings")]),t._v("。支持重写application.yml中的设置。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./backend-ip-port.html"}},[t._v("IP and port setting")]),t._v("。介绍如何设置和使用IP和端口。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./backend-init-mode.html"}},[t._v("Backend init mode startup")]),t._v("。如何初始化环境并优雅地退出。\n在尝试初始化新群集之前，请阅读此内容。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./backend-cluster.html"}},[t._v("Cluster management")]),t._v("。指导您将backend服务器设置为群集模式。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./backend-k8s.html"}},[t._v("Deploy in kubernetes")]),t._v(".。指导您构建和使用Skywalking图像，并在K8S中部署。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./backend-storage.html"}},[t._v("Choose storage")]),t._v(".如我们所知，在默认的快速启动中，backend 使用h2数据库运行。但显然，它不符合产品环境。在这里，你可以找到其他的选择。\n选择你喜欢的，我们也欢迎任何人贡献新的存储实施者，")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./backend-receivers.html"}},[t._v("Set receivers")]),t._v("。 你可以根据你的要求选择接收者，大多数接收者是无害的，至少我们的默认接收器是无害的。您可以设置并激活所有提供的接收器。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./backend-fetcher.html"}},[t._v("Open fetchers")]),t._v(". 你可以从目标应用程序读取指标。它们的工作原理就像接收器，但在拉取模式下，就像典型的普罗米修斯.")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./backend-token-auth.html"}},[t._v("Token authentication")]),t._v(". 你可以添加令牌身份验证机制，以避免“OAP”接收不可信的数据.")],1),t._v(" "),e("li",[t._v("在backend进行"),e("router-link",{attrs:{to:"./trace-sampling.html"}},[t._v("trace sampling")]),t._v(" 。 此示例保持度量的准确性，但不保存某些存储中依赖于速率的traces。")],1),t._v(" "),e("li",[t._v("根据 "),e("router-link",{attrs:{to:"./slow-db-statement.html"}},[t._v("slow DB statement threshold")]),t._v(" 配置文档可了解如何检测系统中的慢速数据库语句（包括SQL语句）。")],1),t._v(" "),e("li",[t._v("官方 "),e("router-link",{attrs:{to:"./../../guides/backend-oal-scripts.html"}},[t._v("OAL scripts")]),t._v("。正如您从我们的"),e("router-link",{attrs:{to:"./../../concepts-and-designs/oal.html"}},[t._v("OAL introduction")]),t._v("中所知，\n大多数backend分析功能都基于脚本。这是对官方手稿的描述，这有助于您了解正在处理的度量数据，也可以用于警报。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./backend-alarm.html"}},[t._v("Alarm")]),t._v(". 告警提供基于时间序列的检查机制。你可以设置针对分析OAL度量对象的告警规则。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./advanced-deployment.html"}},[t._v("Advanced deployment options")]),t._v("。如果你需要部署的backend有很大的扩展性并支持高负载，你需要看看这个。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./metrics-exporter.html"}},[t._v("Metrics exporter")]),t._v(". 使用metrics data导出器将metric数据转发给第三方系统。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./ttl.html"}},[t._v("Time To Live (TTL)")]),t._v(". Metrics 和 trace 是时间序列数据, 因此可能会被永久存储, 你可以设置各个维度的过期时间。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./dynamic-config.html"}},[t._v("Dynamic Configuration")]),t._v(". 从远程服务拉取动态改变OAP配置或第三方配置。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./uninstrumented-gateways.html"}},[t._v("Uninstrumented Gateways")]),t._v(". 配置SkyWalking代理插件不支持的网关/代理，在拓扑图中反映委托信息。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./apdex-threshold.html"}},[t._v("Apdex threshold")]),t._v(". 如果在OAL中激活Apdex计算，则需要为不同的服务配置阈值。")],1),t._v(" "),e("li",[e("router-link",{attrs:{to:"./endpoint-grouping-rules.html"}},[t._v("Group Parameterized Endpoints")]),t._v(". 为参数化端点配置分组规则，以改进指标的意义。")],1)]),t._v(" "),t._m(12),t._v(" "),e("p",[t._v("OAP后端集群本身的底层是一个分布式流处理系统。为了帮助运营团队，我们为OAP后端本身提供遥测。按照"),e("router-link",{attrs:{to:"./backend-telemetry.html"}},[t._v("document")]),t._v("使用它。")],1),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),e("p",[t._v("SkyWalking 提供了降取样时间序列指标的功能.\n根据各个时间维度(如分钟, 小时, 天, 月)进行查询和存储时的时间格式化会涉及到时区。")]),t._v(" "),e("p",[t._v("比如说, 按分钟维度的指标时间将会被格式化成 YYYYMMDDHHmm 格式, 格式化过程是和时区相关的。")]),t._v(" "),e("p",[t._v("默认情况下, SkyWalking OAP 后端选择操作系统的默认时区, 如果你想覆盖这个行为, 请按照普通 Java 程序和操作系统设置的相关文档进行设置。")]),t._v(" "),t._m(15),t._v(" "),e("p",[t._v("SkyWalking提供了浏览器UI、CLI和GraphQL方式来支持扩展. 但有些用户可能会想到直接从存储中查询数据。\n比如在ElasticSearch的例子中，Kibana就是一个很好的工具。")]),t._v(" "),e("p",[t._v("在默认情况下，由于减少内存、网络和存储空间的使用, skywalk只在实体中保存id，而元数据只保存在“*_inventory”实体中。\n在这种特殊情况下这些工具通常不支持嵌套查询，或者工作起来不方便。\nSkyWalking提供了一个配置，将所有必要的name列添加到最终的度量实体中，以ID作为权衡。")]),t._v(" "),e("p",[t._v("看一下'application.yaml'中配置“core/default/activeExtraModelColumns”，并将其设置为true以打开该特性。")]),t._v(" "),e("p",[t._v("这个特性不会为本地的skywalk场景提供任何新特性，只用于第三方集成。.")])])}),[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"backend启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#backend启动"}},[this._v("#")]),this._v(" Backend启动")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("首先也是最重要的是，Skywalking backend启动行为由"),a("code",[this._v("config/application.yml")]),this._v("驱动。\n了解这个设置文件将帮助您阅读此文档。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"启动脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动脚本"}},[this._v("#")]),this._v(" 启动脚本")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"application-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#application-yml"}},[this._v("#")]),this._v(" application.yml")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("所有, 在"),a("code",[this._v("application.yml")]),this._v("里有三个级别。")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ol",[e("li",[e("strong",[t._v("Level 1")]),t._v(", 模块名。模块定义项。")]),t._v(" "),e("li",[e("strong",[t._v("Level 2")]),t._v(", 模块类型。 设置模块类型。")]),t._v(" "),e("li",[e("strong",[t._v("Level 3")]),t._v(". 类型属性。")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"language-yaml extra-class"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("storage")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selector")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the mysql storage will actually be activated, while the h2 storage takes no effect")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("h2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("driver")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_STORAGE_H2_DRIVER"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("org.h2.jdbcx.JdbcDataSource"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_STORAGE_H2_URL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("jdbc"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("h2"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("mem"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("skywalking"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("oap"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("db"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_STORAGE_H2_USER"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("sa"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadataQueryMaxSize")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_STORAGE_H2_QUERY_MAX_SIZE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mysql")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("properties")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jdbcUrl")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_JDBC_URL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdbc:mysql://localhost:3306/swtest"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dataSource.user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_DATA_SOURCE_USER"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("root"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dataSource.password")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_DATA_SOURCE_PASSWORD"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("root@1234"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dataSource.cachePrepStmts")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_DATA_SOURCE_CACHE_PREP_STMTS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dataSource.prepStmtCacheSize")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_DATA_SOURCE_PREP_STMT_CACHE_SQL_SIZE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("250")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dataSource.prepStmtCacheSqlLimit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_DATA_SOURCE_PREP_STMT_CACHE_SQL_LIMIT"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("dataSource.useServerPrepStmts")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_DATA_SOURCE_USE_SERVER_PREP_STMTS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadataQueryMaxSize")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SW_STORAGE_MYSQL_QUERY_MAX_SIZE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("5000")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# other configurations")]),t._v("\n")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ol",[e("li",[e("strong",[e("code",[t._v("storage")])]),t._v(" is the 模块名.")]),t._v(" "),e("li",[e("strong",[e("code",[t._v("selector")])]),t._v(" 模块类型.")]),t._v(" "),e("li",[e("strong",[e("code",[t._v("default")])]),t._v(" 模块默认属性.")]),t._v(" "),e("li",[e("code",[t._v("driver")]),t._v(", "),e("code",[t._v("url")]),t._v(", ... "),e("code",[t._v("metadataQueryMaxSize")]),t._v(" 类型属性.")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ol",[e("li",[e("strong",[t._v("Core")]),t._v("。做所有数据分析和流调度的基本和主要框架。")]),t._v(" "),e("li",[e("strong",[t._v("Cluster")]),t._v("。管理集群中的多个后端实例，这可以提供高吞吐量的处理能力。")]),t._v(" "),e("li",[e("strong",[t._v("Storage")]),t._v("。持久化分析结果。")]),t._v(" "),e("li",[e("strong",[t._v("Query")]),t._v("。提供查询接口给UI。")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",[t._v("对于"),e("strong",[t._v("Cluster")]),t._v(" 和"),e("strong",[t._v("Storage")]),t._v(" 有多个实现者(提供者), 查看 "),e("strong",[t._v("Cluster management")]),t._v("\n和 "),e("strong",[t._v("Choose storage")]),t._v(" 的"),e("a",{attrs:{href:"#advanced-feature-document-link-list"}},[t._v("link list")]),t._v("文档。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("p",[this._v("一些"),a("strong",[this._v("receiver")]),this._v(" 模块也提供了。\nReceiver是一个模块，负责接受后端的传入数据请求。大多数（所有）通过一些rpc协议，如GRPC和HTTPrestful提供。\nReceiver有许多不同的模块名，你可以阅读"),a("a",{attrs:{href:"#advanced-feature-document-link-list"}},[this._v("link list")]),this._v("中的"),a("strong",[this._v("Set receivers")]),this._v("文档。")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"高级特性的文档链接列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#高级特性的文档链接列表"}},[this._v("#")]),this._v(" 高级特性的文档链接列表")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"backend-遥测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#backend-遥测"}},[this._v("#")]),this._v(" backend 遥测")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"faqs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#faqs"}},[this._v("#")]),this._v(" FAQs")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"何时以及为何我们需要设置时区"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#何时以及为何我们需要设置时区"}},[this._v("#")]),this._v(" 何时以及为何我们需要设置时区")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h4",{attrs:{id:"如何通过第三方工具查询存储信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何通过第三方工具查询存储信息"}},[this._v("#")]),this._v(" 如何通过第三方工具查询存储信息?")])}],!1,null,null,null);a.default=n.exports}}]);