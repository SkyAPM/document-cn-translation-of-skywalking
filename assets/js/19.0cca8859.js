(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{228:function(a,e,t){"use strict";t.r(e);var s=t(0),v=Object(s.a)({},(function(){var a=this.$createElement;this._self._c;return this._m(0)}),[function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"content"},[t("h2",{attrs:{id:"工程编译指南"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#工程编译指南"}},[a._v("#")]),a._v(" 工程编译指南")]),a._v(" "),t("p",[a._v("本文档用于指导开发者，在本地开发环境中编译工程。")]),a._v(" "),t("h3",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[a._v("#")]),a._v(" 前言")]),a._v(" "),t("p",[a._v("因为工程结构和代码依赖会随版本变化，如果读者熟悉travis-ci,则可直接参考"),t("a",{attrs:{href:"../../.travis.yml"}},[a._v(".travis.yml")])]),a._v(" "),t("p",[t("strong",[a._v("工程使用Git Submodule，所以不建议使用GitHub的tag和release页面的源码下载，来编译工程")])]),a._v(" "),t("h3",{attrs:{id:"从github下载代码编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从github下载代码编译"}},[a._v("#")]),a._v(" 从GitHub下载代码编译")]),a._v(" "),t("ol",[t("li",[a._v("准备环境: git, jdk8，Maven")]),a._v(" "),t("li",[t("code",[a._v("git clone https://github.com/apache/incubator-skywalking.git")])]),a._v(" "),t("li",[t("code",[a._v("cd incubator-skywalking/")])]),a._v(" "),t("li",[a._v("切换到tag "),t("code",[a._v("git checkout [tagname]")]),a._v(" (可选，当需要编译发行版本时，请是切换到指定分支)")]),a._v(" "),t("li",[t("code",[a._v("git submodule init")])]),a._v(" "),t("li",[t("code",[a._v("git submodule update")])]),a._v(" "),t("li",[a._v("执行"),t("code",[a._v("mvn clean package -DskipTests")])]),a._v(" "),t("li",[a._v("生成包在"),t("code",[a._v("/dist")]),a._v("目录下（.tar.gz是linux环境，.zip是windows环境）")])]),a._v(" "),t("h3",{attrs:{id:"从apache源码镜像下载编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#从apache源码镜像下载编译"}},[a._v("#")]),a._v(" 从Apache源码镜像下载编译")]),a._v(" "),t("ol",[t("li",[a._v("准备环境: jdk8，Maven")]),a._v(" "),t("li",[a._v("执行"),t("code",[a._v("mvn clean package -DskipTests")])]),a._v(" "),t("li",[a._v("生成包在"),t("code",[a._v("/dist")]),a._v("目录下（.tar.gz是linux环境，.zip是windows环境）")])]),a._v(" "),t("h2",{attrs:{id:"在intellij-idea中编译工程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在intellij-idea中编译工程"}},[a._v("#")]),a._v(" 在IntelliJ IDEA中编译工程")]),a._v(" "),t("p",[a._v("上述步骤在命令行中，能够很好的编译工程，但导入到编译器中的工程依然会有一些报错，我们需要进行几步简单的操作。")]),a._v(" "),t("ol",[t("li",[a._v("在IntelliJ Terminal中，执行"),t("code",[a._v("mvn compile -Dmaven.test.skip=true")]),a._v("进行编译")]),a._v(" "),t("li",[a._v("设置gRPC的自动生成代码目录，为源码目录")])]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("apm-protocol/apm-network/target/generated-sources/protobuf")]),a._v("目录下的"),t("code",[a._v("grpc-java")]),a._v("和"),t("code",[a._v("java")]),a._v("目录")]),a._v(" "),t("li",[t("strong",[a._v("apm-collector/apm-collector-remote/apm-remote-grpc-provider/target/generated-sources/protobuf")]),a._v("目录下的"),t("code",[a._v("grpc-java")]),a._v("和"),t("code",[a._v("java")]),a._v("目录")])]),a._v(" "),t("h2",{attrs:{id:"编译resin-3，-resin-4-和-oracle-jdbc-驱动插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译resin-3，-resin-4-和-oracle-jdbc-驱动插件"}},[a._v("#")]),a._v(" 编译Resin-3， Resin-4 和 Oracle JDBC 驱动插件")]),a._v(" "),t("p",[a._v("为了遵守Apache关于协议（License）的相关要求，不符合Apache相关要求的类库所对应的Plugin不会自动编译。如需编译对应的插件，\n需要手动下载驱动或类库，并将文件拷贝到"),t("code",[a._v("ci-dependencies/")]),a._v("中，运行"),t("code",[a._v("mvn package")]),a._v("进行编译。")]),a._v(" "),t("p",[t("code",[a._v("ci-dependencies/")]),a._v("下对应的类库文件名为：")]),a._v(" "),t("ul",[t("li",[a._v("resin-3.0.9.jar")]),a._v(" "),t("li",[a._v("resin-4.0.41.jar")]),a._v(" "),t("li",[a._v("ojdbc14-10.2.0.4.0.jar")])]),a._v(" "),t("h2",{attrs:{id:"faq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[a._v("#")]),a._v(" FAQ")]),a._v(" "),t("h3",{attrs:{id:"npm-install超时失败"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#npm-install超时失败"}},[a._v("#")]),a._v(" npm install超时失败")]),a._v(" "),t("p",[a._v("如果在编译apm-webapp时碰到下载包失败问题，可以将apm-webapp中pom.xml中npm源地址修改为淘宝的源，在中国的访问速度可以大大提高.")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("<arguments>install --registry=https://registry.npmjs.org/</arguments>\n")])])]),t("p",[a._v("修改为")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("<arguments>install --registry=https://registry.npm.taobao.org/</arguments>\n")])])])])}],!1,null,null,null);e.default=v.exports}}]);